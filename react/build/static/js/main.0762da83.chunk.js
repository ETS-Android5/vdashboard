(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{49:function(e,t,a){e.exports=a(83)},82:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(41),r=a.n(s),o=a(21),l=a(13),c=a(48),d=a(87);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=!0,m=a(6),h=a(7),p=a(9),f=a(5),v=a(10),b=a(89),g=a(86),y=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,"Not Implemented component")}}]),t}(i.a.Component),E=a(23),w=a(4),j=a(88),O=a(14),k=a.n(O),_=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={username:"root",password:"",login:!0},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.logins;console.log("componentDidMount",e),this.setState({username:e.form.username})}},{key:"render",value:function(){return i.a.createElement("div",{style:{width:"300px",float:"right"}},i.a.createElement("span",{style:{display:"inline-block",padding:"8px",backgroundColor:"black",borderRadius:"3px",width:"120px",textAlign:"center",cursor:"pointer",color:"white"}},i.a.createElement("i",{className:"fas fa-user"}),"  ",this.state.username))}}]),t}(i.a.Component),N=Object(j.a)(Object(l.b)(function(e){return{logins:e.logins}},{})(_)),A=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.title;return i.a.createElement("div",{className:"dashboard--center",onClick:this.handleCenterClick},i.a.createElement("div",{style:{textAlign:"right"}},i.a.createElement(N,null)),i.a.createElement("h1",{className:"h1"},e),this.props.children)}}]),t}(i.a.Component),C=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={isVisible:!1,selected:{value:"na",label:"Select genre"}},a.handleOnClick=a.handleOnClick.bind(Object(w.a)(Object(w.a)(a))),a.showHide=a.showHide.bind(Object(w.a)(Object(w.a)(a))),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"showHide",value:function(e){e.stopPropagation(),this.setState({isVisible:!this.state.isVisible})}},{key:"handleOnClick",value:function(e){this.setState({selected:e,isVisible:!1});var t=this.props,a=t.onSelect,n=t.model;n&&(a=n.onSelect),a(e)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.selected,a=e.model;console.log("componentDidMount",t),a&&(t=a.selected),t&&this.setState({selected:t})}},{key:"componentWillReceiveProps",value:function(e,t){var a=e.selected,n=e.model;n&&(a=n.selected),a&&this.setState({selected:a})}},{key:"render",value:function(){var e=this,t=this.props.data;return i.a.createElement("div",{className:"dd-wrapper"},i.a.createElement("div",{className:"dd-header dd-header-open",id:"select-city",onClick:function(t){return e.showHide(t)}},i.a.createElement("div",{className:"dd-header-title",id:"dd-header-title"}," ",this.state.selected.label," "),i.a.createElement("div",{className:"dd-icon"},i.a.createElement("i",{className:"fas fa-angle-down"}))),i.a.createElement("ul",{className:"dd-list",id:"dd-list",style:{display:this.state.isVisible?"block":"none"}},t.map(function(t,a){return i.a.createElement("li",{key:a,onClick:function(){return e.handleOnClick(t)},id:t.value,className:"dd-list-item"},t.label)})))}}]),t}(i.a.Component);C.defaultProps={data:[{value:"pop",label:"Pop"},{value:"jazz",label:"Jazz"},{value:"rock",label:"Rock"},{value:"disco",label:"Disco"}],onSelect:function(e){return console.log("You selected item ",e)}};var x=C,S=function(e){var t=e.itemRow,a="";return a=(t.value+"").includes("http")?i.a.createElement("img",{style:{width:"160px"},src:t.value,alt:"Image"}):t.value,i.a.createElement("div",{key:a+Math.random(),style:{flex:t.flexSize},href:"#"},a)},P=function(e){var t,a=e.fields,n=e.item,s=e.itemDeleteAction,r=e.itemEditAction,o=e.itemViewAction,l=n;return n.__class&&"Video"===n.__class&&(l=n.form),t=new R(l),i.a.createElement("li",{className:"list-group-item"},i.a.createElement("div",{className:"list-group-item-data"},Object.keys(t).map(function(e){return a&&a.includes(e)?i.a.createElement(S,{itemRow:t[e],key:e}):null})),i.a.createElement("div",{className:"list-group-item-buttons"},r&&null!==r?i.a.createElement("div",{style:{flex:1}},i.a.createElement("button",{onClick:function(){return r(l)},className:"button-small"},"Edit")):null,s&&null!==s?i.a.createElement("div",{style:{flex:1}},i.a.createElement("button",{onClick:function(){return s(l._id)},className:"button-small"},"Delete")):null,o&&null!==o?i.a.createElement("div",{style:{flex:1}},i.a.createElement("button",{onClick:function(){return o(l)},className:"button-small"},"View")):null))},D=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).itemEditAction=a.itemEditAction.bind(Object(w.a)(Object(w.a)(a))),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"itemEditAction",value:function(e){console.log("Item edit: ",e),this.props.itemEditAction(e)}},{key:"render",value:function(){var e=this.props,t=e.items,a=e.itemDeleteAction,n=e.itemEditAction,s=e.itemViewAction,r=e.fields;return t&&0!==t.length?i.a.createElement("ul",{className:"list-group u-margin-top-big"},t.map(function(e,t){return Array.isArray(e)?null:i.a.createElement(P,{fields:r,itemDeleteAction:a,itemEditAction:n,itemViewAction:s,key:t,item:e})})):i.a.createElement("div",null,"Loading...")}}]),t}(i.a.Component);D.defaultProps={fields:["id","title","genre"],items:[{id:2,title:"Laboris soluta nostr",description:"Ad maxime possimus ",genre:"jazz",image_path:"images/85588900-f44a-11e9-ab34-c7f808721400_23.png"},{id:1,title:"Molestiae aliquam it",description:"Ea ea architecto eni",genre:"jazz",image_path:"images/607ad250-f44a-11e9-ab34-c7f808721400_24.png"}]};var U=D;function R(e){this.__class="Row";var t={id:1,title:3,description:5,genre:2,controls:5,image:3};for(var a in e)this[a]={value:e[a],flexSize:t[a]?t[a]:1};return this}var I=a(85),T=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).setActive=a.setActive.bind(Object(w.a)(Object(w.a)(a))),a.state={active:"dashboard"},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"setActive",value:function(e){e.preventDefault(),console.log("Setting active "+e),this.setState({active:e})}},{key:"handleLogout",value:function(){(0,this.props.logoutAction)(),this.props.history.push("/")}},{key:"componentWillReceiveProps",value:function(e,t){!1===e.logins.form.authenticated&&this.props.history.push("/")}},{key:"render",value:function(){var e=this,t=this.props.location.pathname;return t=0==t.length?"/dashboard":t,i.a.createElement("div",{className:"dashboard--left-bar"},i.a.createElement("span",{className:"button line u-green-text"},i.a.createElement("i",{className:"fas fa-shopping-basket"}),i.a.createElement("label",{htmlFor:""},i.a.createElement("h4",{className:"italic"},"Admin"))),i.a.createElement("span",{className:"dashboard--left-bar-line"}),i.a.createElement(I.a,{to:"/dashboard",className:"/dashboard"==t?"button active":"button"},i.a.createElement("i",{className:"fas fa-home"}),i.a.createElement("label",{htmlFor:""},"Dashboard")),i.a.createElement(I.a,{to:"/users",className:"/users"==t?"button active":"button"},i.a.createElement("i",{className:"fas fa-users"}),i.a.createElement("label",{htmlFor:""},"Users")),i.a.createElement(I.a,{to:"/profile",className:"/profile"==t?"button active":"button"},i.a.createElement("i",{className:"fas fa-user"}),i.a.createElement("label",{htmlFor:""},"Profile")),i.a.createElement(I.a,{to:"/shows",className:"/shows"==t?"button active":"button"},i.a.createElement("i",{className:"fas fa-photo-video"}),i.a.createElement("label",{htmlFor:""},"Shows")),i.a.createElement(I.a,{to:"/settings",className:"/settings"==t?"button active":"button"},i.a.createElement("i",{className:"fas fa-cog"}),i.a.createElement("label",null,"Settings")),i.a.createElement(I.a,{to:"/reports",className:"/reports"==t?"button active":"button"},i.a.createElement("i",{className:"fas fa-chart-bar"}),i.a.createElement("label",null,"Reports")),i.a.createElement("span",{className:"button",onClick:function(){return e.handleLogout()}},i.a.createElement("i",{className:"fas fa-sign-out-alt"}),i.a.createElement("label",null,"Sign out")))}}]),t}(i.a.Component),F={logoutAction:function(e){return console.log("Inside logoutAction",e),{type:"Logout",payload:{user:e}}}},V=Object(j.a)(Object(l.b)(function(e){return{logins:e.logins}},F)(T)),L=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).adminList=[{value:"1",label:"Yes"},{value:"0",label:"No"}],a.state={id:null,email:"",username:"",password:"",admin:0,showAdminList:!1},a.showAdminList=a.showAdminList.bind(Object(w.a)(Object(w.a)(a))),a.handleCenterClick=a.handleCenterClick.bind(Object(w.a)(Object(w.a)(a))),a.makeAdmin=a.makeAdmin.bind(Object(w.a)(Object(w.a)(a))),a.handleChange=a.handleChange.bind(Object(w.a)(Object(w.a)(a))),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"showAdminList",value:function(e){e.stopPropagation(),this.setState({showAdminList:!this.state.showAdminList})}},{key:"handleCenterClick",value:function(){this.setState({showAdminList:!1})}},{key:"makeAdmin",value:function(e){this.setState({admin:e.value})}},{key:"handleChange",value:function(e){this.setState(Object(E.a)({},e.target.id,e.target.value))}},{key:"componentWillReceiveProps",value:function(e,t){console.log("componentWillReceiveProps",e);var a=e.users,n=a.edit,i=a.add;if(e.users&&n){var s=n.id,r=n.email,o=n.username,l=n.admin;this.setState({id:s||null,email:r,username:o,password:"",admin:l})}(i&&1===i.status||n&&n.result&&1==n.result.affectedRows)&&this.setState({id:null,email:"",username:"",password:"",admin:0})}},{key:"handleFormSubmit",value:function(e){e.preventDefault();var t=this.state,a=t.id,n=t.email,i=t.username,s=t.password,r=t.admin,o=this.props,l=o.userAddAction,c=o.userUpdateAction,d={id:a,email:n,username:i,password:s,admin:r};console.log("Form data: ",a,i,s,r),null===a?l(d):(c(d),this.setState({id:null,email:"",username:"",password:"",admin:0}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.users,n=t.userDeleteAction,s=t.userEditAction;return a?(console.log("Users Render",a),i.a.createElement("section",{id:"dashboard",className:"dashboard"},i.a.createElement(V,null),i.a.createElement(A,{title:"Users"},i.a.createElement("form",{action:""},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-2"},i.a.createElement("input",{type:"text",id:"email",placeholder:"Type email",value:this.state.email,onChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-2"},i.a.createElement("input",{type:"text",id:"username",placeholder:"Type username",value:this.state.username,onChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-3"},i.a.createElement("input",{type:"password",id:"password",placeholder:"Type password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-2"},i.a.createElement(x,{selected:this.adminList.find(function(t){return t.value==e.state.admin}),data:this.adminList,onSelect:this.makeAdmin}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-3"},i.a.createElement("div",{className:"dashboard--container"},i.a.createElement("button",{style:{width:"80px"},type:"submit",onClick:function(t){return e.handleFormSubmit(t)}},i.a.createElement("i",{className:"fas fa-save"})," Save"))))),i.a.createElement(U,{fields:["id","username","admin"],items:a.list,itemDeleteAction:n,itemEditAction:s})))):i.a.createElement("div",null,"Loading")}}]),t}(i.a.Component),z={userAddAction:function(e){return console.log("Inside userAddAction",e),{type:"User.Add",payload:{user:e}}},userUpdateAction:function(e){return console.log("Inside userUpdateAction",e),{type:"User.Update",payload:{user:e}}},userDeleteAction:function(e){return console.log("Inside userDeleteAction",e),{type:"User.Delete",payload:{id:e.id}}},userEditAction:function(e){return{type:"User.Edit",payload:{user:e}}}},M=Object(j.a)(Object(l.b)(function(e){return{users:e.users}},z)(L)),B="http://localhost:8090",W=a(24),G=[["Element","Density",{role:"style"}],["Copper",8.94,"#b87333"],["Silver",10.49,"silver"],["Gold",19.3,"gold"],["Platinum",21.45,"color: #e5e4e2"]],H=function(e){function t(e){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).call(this,e))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return i.a.createElement("section",{id:"dashboard",className:"dashboard"},i.a.createElement(V,null),i.a.createElement("div",{className:"dashboard--center",onClick:this.handleCenterClick},i.a.createElement("div",{style:{textAlign:"right"}},i.a.createElement(N,null)),i.a.createElement("h1",null,"Dashboard"),i.a.createElement("div",{style:{padding:"40px",backgroundColor:"lavenderblush",borderRadius:"3px"}},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-4"},i.a.createElement("div",{style:{width:"100%",height:"300px",backgroundColor:"red",borderRadius:"3px"}})),i.a.createElement("div",{className:"col-1-of-4"},i.a.createElement("div",{style:{width:"100%",height:"300px",backgroundColor:"orange",borderRadius:"3px"}})),i.a.createElement("div",{className:"col-1-of-4"},i.a.createElement("div",{style:{width:"100%",height:"300px",backgroundColor:"green",borderRadius:"3px"}})),i.a.createElement("div",{className:"col-1-of-4"},i.a.createElement("div",{style:{width:"100%",height:"300px",backgroundColor:"blue",borderRadius:"3px"}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement(W.a,{width:"100%",height:"700px",chartType:"GeoChart",data:[["Country","Popularity"],["Germany",200],["United States",300],["Brazil",400],["Canada",500],["France",600],["RU",700]],mapsApiKey:"YOUR_KEY_HERE",rootProps:{"data-testid":"1"}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-2"},i.a.createElement(W.a,{chartType:"ColumnChart",width:"100%",height:"400px",data:G})),i.a.createElement("div",{className:"col-1-of-2"},i.a.createElement(W.a,{width:"100%",height:"400px",chartType:"PieChart",loader:i.a.createElement("div",null,"Loading Chart"),data:[["Task","Hours per Day"],["Work",11],["Eat",2],["Commute",2],["Watch TV",2],["Sleep",7]],options:{title:"My Daily Activities"},rootProps:{"data-testid":"1"}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-2"},i.a.createElement(W.a,{width:"100%",height:"400px",chartType:"PieChart",loader:i.a.createElement("div",null,"Loading Chart"),data:[["Language","Speakers (in millions)"],["Assamese",13],["Bengali",83],["Bodo",1.4],["Dogri",2.3],["Gujarati",46],["Hindi",300],["Kannada",38],["Kashmiri",5.5],["Konkani",5],["Maithili",20],["Malayalam",33],["Manipuri",1.5],["Marathi",72],["Nepali",2.9],["Oriya",33],["Punjabi",29],["Sanskrit",.01],["Santhali",6.5],["Sindhi",2.5],["Tamil",61],["Telugu",74],["Urdu",52]],options:{title:"Indian Language Use",legend:"none",pieSliceText:"label",slices:{4:{offset:.2},12:{offset:.3},14:{offset:.4},15:{offset:.5}}},rootProps:{"data-testid":"5"}})),i.a.createElement("div",{className:"col-1-of-2"},i.a.createElement(W.a,{width:"100%",height:"400px",chartType:"BubbleChart",loader:i.a.createElement("div",null,"Loading Chart"),data:[["ID","X","Y","Temperature"],["",80,167,120],["",79,136,130],["",78,184,50],["",72,278,230],["",81,200,210],["",72,170,100],["",68,477,80]],options:{colorAxis:{colors:["yellow","red"]}},rootProps:{"data-testid":"2"}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement(W.a,{width:"100%",height:"500px",chartType:"Histogram",loader:i.a.createElement("div",null,"Loading Chart"),data:[["Dinosaur","Length"],["Acrocanthosaurus (top-spined lizard)",12.2],["Albertosaurus (Alberta lizard)",9.1],["Allosaurus (other lizard)",12.2],["Apatosaurus (deceptive lizard)",22.9],["Archaeopteryx (ancient wing)",.9],["Argentinosaurus (Argentina lizard)",36.6],["Baryonyx (heavy claws)",9.1],["Brachiosaurus (arm lizard)",30.5],["Ceratosaurus (horned lizard)",6.1],["Coelophysis (hollow form)",2.7],["Compsognathus (elegant jaw)",.9],["Deinonychus (terrible claw)",2.7],["Diplodocus (double beam)",27.1],["Dromicelomimus (emu mimic)",3.4],["Gallimimus (fowl mimic)",5.5],["Mamenchisaurus (Mamenchi lizard)",21],["Megalosaurus (big lizard)",7.9],["Microvenator (small hunter)",1.2],["Ornithomimus (bird mimic)",4.6],["Oviraptor (egg robber)",1.5],["Plateosaurus (flat lizard)",7.9],["Sauronithoides (narrow-clawed lizard)",2],["Seismosaurus (tremor lizard)",45.7],["Spinosaurus (spiny lizard)",12.2],["Supersaurus (super lizard)",30.5],["Tyrannosaurus (tyrant lizard)",15.2],["Ultrasaurus (ultra lizard)",30.5],["Velociraptor (swift robber)",1.8]],options:{title:"Lengths of dinosaurs, in meters",legend:{position:"none"}},rootProps:{"data-testid":"1"}}))))))}}]),t}(i.a.Component),J=Object(j.a)(Object(l.b)(function(e){return{spot:e.spot}},{})(H)),Y=a(25),K=a(11),q=a.n(K),$=a(18),X=a(2),Q=function(){function e(t){Object(m.a)(this,e),this.forceUpdate=function(){return null},this.name=t,this.forceUpdate=function(){return null},this.server=B+"/api/v1/"+t,this.debug=!1}return Object(h.a)(e,[{key:"log",value:function(e){0}},{key:"types",get:function(){return{create:this.name+".create",create_success:this.name+".create.success",create_fail:this.name+".create.fail",read:this.name+".read",read_success:this.name+".read.success",read_fail:this.name+".read.fail",edit:this.name+".edit",edit_success:this.name+".edit.success",edit_fail:this.name+".edit.fail",update:this.name+".update",update_success:this.name+".update.success",update_fail:this.name+".update.fail",delete:this.name+".delete",delete_success:this.name+".delete.success",delete_fail:this.name+".delete.fail"}}},{key:"actions",get:function(){var e=this;return{create:function(t){return{type:e.types.create,payload:{data:t}}},create_success:function(t){return{type:e.types.create_success,payload:{data:t}}},create_fail:function(t){return{type:e.types.create_fail,payload:{data:t}}},read:function(t){return{type:e.types.read,payload:{data:t}}},read_success:function(t){return{type:e.types.read_success,payload:{data:t}}},read_fail:function(t){return{type:e.types.read_fail,payload:{data:t}}},update:function(t){return{type:e.types.update,payload:{data:t}}},update_success:function(t){return{type:e.types.update_success,payload:{data:t}}},update_fail:function(t){return{type:e.types.update_fail,payload:{data:t}}},edit:function(t){return{type:e.types.edit,payload:{data:t}}},edit_success:function(t){return{type:e.types.edit_success,payload:{data:t}}},edit_fail:function(t){return{type:e.types.edit_fail,payload:{data:t}}},delete:function(t){return{type:e.types.delete,payload:{data:t}}},delete_success:function(t){return{type:e.types.delete_success,payload:{data:t}}},delete_fail:function(t){return{type:e.types.delete_fail,payload:{data:t}}}}}},{key:"reducers",get:function(){var e=this,t={list:[],form:{},actions:{type:null,ok:!1}};return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n.type){case e.types.read_success:var i=n.payload.data,s=i.list,r=i.form,o=i.actions;return Object($.a)({},a,{list:s,form:r,actions:o});case e.types.edit:e.log("Inside reducer of class "+e.name+" : "+JSON.stringify(n.payload));var l=n.payload.data;return l.mode=e.types.edit,Object($.a)({},a,{form:l});case e.types.create_success:var c=n.payload.data;return r=c.form,o=c.actions,a.list&&a.list.push(r)||(a.list=[]),1===o.ok&&r._id&&(r={}),o.timestamp=Date.now(),Object($.a)({},a,{actions:o,form:r});case e.types.update_success||e.types.delete_success:return r=n.payload.data.form,1===n.ok&&(r={}),Object($.a)({},a,{action:n.payload.data.action,form:r});default:return e.log("Inside show default reducer of class "+e.name+JSON.stringify(n)),a}}}},{key:"sagas",get:function(){var e=this;return{create:q.a.mark(function t(a){var n;return q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Action in saga",a.payload),t.prev=1,t.next=4,Object(X.a)(e.api.create,{formData:a.payload.data.formData,action:function(e){return a.payload.data.action?a.payload.data.action(e):null}});case 4:return n=t.sent,console.log("CREATE ",n),console.log("CREATE if",n),t.next=10,Object(X.b)(e.actions.create_success(n));case 10:t.next=15;break;case 12:return console.log("CREATE fail",n),t.next=15,Object(X.b)(e.actions.create_fail(n));case 15:t.next=23;break;case 17:return t.prev=17,t.t0=t.catch(1),console.log(t.t0),console.log("CREATE err",t.t0),t.next=23,Object(X.b)(e.actions.create_fail(t.t0));case 23:case"end":return t.stop()}},t,null,[[1,17]])}),read:q.a.mark(function t(a){var n;return q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(X.a)(e.api.read,a.payload);case 3:return n=t.sent,t.next=7,Object(X.b)(e.actions.read_success(n));case 7:t.next=11;break;case 9:return t.next=11,Object(X.b)(e.actions.read_fail(n));case 11:t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(0),t.next=17,Object(X.b)(e.actions.read_fail(t.t0));case 17:case"end":return t.stop()}},t,null,[[0,13]])}),update:q.a.mark(function t(a){var n;return q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(X.a)(e.api.update,{formData:a.payload.data.formData,action:function(e){return a.payload.data.action?a.payload.data.action(e):null}});case 3:if(!(n=t.sent)||!Array.isArray(Object.keys(n))){t.next=11;break}return t.next=7,Object(X.b)(e.actions.update_success(n));case 7:return t.next=9,Object(X.b)(e.actions.read());case 9:t.next=13;break;case 11:return t.next=13,Object(X.b)(e.actions.update_fail(n));case 13:t.next=20;break;case 15:return t.prev=15,t.t0=t.catch(0),console.log(t.t0),t.next=20,Object(X.b)(e.actions.update_fail(t.t0));case 20:case"end":return t.stop()}},t,null,[[0,15]])}),deleted:q.a.mark(function t(a){var n;return q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"reset"!==a.payload.data){t.next=6;break}return t.next=4,Object(X.b)(e.actions.delete_success(a.payload.data));case 4:t.next=18;break;case 6:return t.next=8,Object(X.a)(e.api.delete,a.payload);case 8:if(n=t.sent,!Array.isArray(Object.keys(n))){t.next=16;break}return t.next=12,Object(X.b)(e.actions.delete_success(n));case 12:return t.next=14,Object(X.b)(e.actions.read());case 14:t.next=18;break;case 16:return t.next=18,Object(X.b)(e.actions.delete_fail(n));case 18:t.next=24;break;case 20:return t.prev=20,t.t0=t.catch(0),t.next=24,Object(X.b)(e.actions.delete_fail(t.t0));case 24:case"end":return t.stop()}},t,null,[[0,20]])})}}},{key:"api",get:function(){var e=this;return{read:function(){return k.a.get(e.server).then(function(e){return e.data}).catch(function(e){throw new Error(e)})},create:function(t){var a={onUploadProgress:function(e){var a=Math.round(100*e.loaded/e.total);t.action&&t.action(a)}};return console.log("API",t),k.a.post(e.server,t.formData,a).then(function(e){return e.data}).catch(function(e){throw new Error(e)})},delete:function(t){return k.a.delete(e.server+"/"+t.data).then(function(e){return e.data}).catch(function(e){throw new Error(e)})},update:function(t){var a=t.formData,n={onUploadProgress:function(e){var a=Math.round(100*e.loaded/e.total);t&&t.action(a)}};return k.a.put(e.server+"/"+a.getAll("_id"),a,n).then(function(e){return console.log("Update response: ",e),e.data}).catch(function(e){throw new Error(e)})}}}}]),e}(),Z=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).mode="create",a._uploadProgress=0,a._form={},a._subscribers=[],a.forceUpdateOnSubscribers=function(e){a._subscribers.includes(e)&&a.forceUpdate()},a.debug=!0,a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"subscribe",value:function(e){return Array.isArray(e)?this._subscribers=[].concat(Object(Y.a)(this._subscribers),Object(Y.a)(e)):this._subscribers.push(e),this}},{key:"forceUpdate",value:function(){}},{key:"setUploadProgress",value:function(e){this._uploadProgress=e,this._uploadProgress>99&&(this.form={},this.mode="create")}},{key:"resetForm",value:function(){var e=this;Object.keys(this.form).forEach(function(t){e._form[t]=""})}},{key:"submitForm",value:function(e,t){var a=this,n=new FormData;return Object.keys(this.form).map(function(e){n.append(e,a.form[e])}),this.hasId?t({formData:n,action:this.setUploadProgress}):e({formData:n,action:this.setUploadProgress}),this.resetForm(),this}},{key:"__class",get:function(){return"ActiveRecord"}},{key:"form",set:function(e){for(var t in this._form={},e)this._form[t]=e[t];return this},get:function(){return this._form}},{key:"uploadProgress",get:function(){return this._uploadProgress}},{key:"hasId",get:function(){return!!(this.form.id&&this.form.id.length>0)||!!(this.form._id&&this.form._id.length>0)}}]),t}(Q),ee=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).onSelect=function(){},a.getFiles=function(){},a.form={title:"",description:"",episodes:[]},a.setImagePath=a.setImagePath.bind(Object(w.a)(Object(w.a)(a))),a.setVideoPath=a.setVideoPath.bind(Object(w.a)(Object(w.a)(a))),console.log("Shows",a.types),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"setVideoPath",value:function(e){this._form.video_path=e[0]}},{key:"setImagePath",value:function(e){this._form.image_path=e[0]}},{key:"videoPath",set:function(e){this._form.video_path=e[0]}},{key:"imagePath",set:function(e){this._form.image_path=e[0]}}]),t}(Z),te=a(30),ae=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e)))._genreList=[{value:"pop",label:"Pop"},{value:"jazz",label:"Jazz"},{value:"rock",label:"Rock"},{value:"disco",label:"Disco"}],a.onSelect2=function(e){a.genre=e},a.onSelect=function(e){a.form.genre=e.value},a.form={title:"",number:"",description:"",image:null,video:null,genre:"rock"},a.setImagePath=a.setImagePath.bind(Object(w.a)(Object(w.a)(a))),a.setVideoPath=a.setVideoPath.bind(Object(w.a)(Object(w.a)(a))),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"setVideoPath",value:function(e){this._form.video_path=e[0]}},{key:"setImagePath",value:function(e){this._form.image_path=e[0]}},{key:"setGenre",value:function(e){this.form.genre=e.value}},{key:"videoPath",set:function(e){this._form.video_path=e[0]}},{key:"imagePath",set:function(e){this._form.image_path=e[0]}},{key:"selected",get:function(){var e=this;return this.genreList.find(function(t){return t.value==e.form.genre})}},{key:"genreList",get:function(){return this._genreList}},{key:"data",get:function(){return this._genreList}},{key:"genre",set:function(e){this.form.genre=e.value}},{key:"actions",get:function(){var e=Object(te.a)(Object(f.a)(t.prototype),"actions",this);return e.read=ie.shows.actions.read,e.create_success=ie.shows.actions.read,e}}]),t}(Z),ne=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).newApiRead=function(e){return console.log("Inside api",e)||k.a.get(a.server,{auth:{username:e.data.username,password:e.data.password},headers:{username:e.data.username,password:e.data.password}}).then(function(e){return e.data}).catch(function(e){throw new Error(e)})},a.form={username:"root",password:"root",authenticated:!1},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"api",get:function(){var e=Object(te.a)(Object(f.a)(t.prototype),"api",this);return e.read=this.newApiRead,e}}]),t}(Z),ie={shows:new ee("shows"),users:new ee("users"),logins:new ne("logins"),episodes:new ae("episodes")},se=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={username:"root",password:"root",login:ie.logins},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){e.preventDefault();var t=e.target.id,a=e.target.value;this.setState(Object(E.a)({},t,a))}},{key:"handleLogin",value:function(e){e.preventDefault(),(0,this.props.readAction)({username:this.state.username,password:this.state.password})}},{key:"componentWillReceiveProps",value:function(e,t){var a=e.logins;console.log("componentWillReceiveProps",a),a&&a.form.authenticated&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this;return i.a.createElement("section",{id:"dashboard",className:"dashboard"},i.a.createElement("div",{className:"dashboard--center",style:{textAlign:"center",float:"none"}},i.a.createElement("div",{style:{display:"flex",width:"100%",height:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center"}},i.a.createElement("form",{action:"",style:{width:"500px",backgroundColor:"black",padding:"40px",borderRadius:"5px"}},i.a.createElement("p",{style:{textAlign:"right"}},i.a.createElement(I.a,{to:"/signup"}," Sign up ")),i.a.createElement("h1",null,"Login"),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("input",{type:"text",id:"username",placeholder:"Type username",value:this.state.username,onChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("input",{type:"password",id:"password",placeholder:"Type password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("button",{style:{width:"80px"},type:"submit",onClick:function(t){return e.handleLogin(t)}},i.a.createElement("i",{className:"fas fa-sign-in-alt"})," Login")))))))}}]),t}(i.a.Component),re={readAction:ie.logins.actions.read},oe=Object(j.a)(Object(l.b)(function(e){return{logins:e.logins}},re)(se)),le=a(46),ce=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={username:"",password:"",email:"",login:!1},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){e.preventDefault();var t=e.target.id,a=e.target.value;this.setState(Object(E.a)({},t,a))}},{key:"handleSignUp",value:function(){var e=Object(le.a)(q.a.mark(function e(t){var a,n,i,s,r,o,l=this;return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=B+"/api/v1/users",n=this.state,i=n.username,s=n.email,r=n.password,o={username:i,email:s,password:r},e.prev=4,e.next=7,k.a.post(a,{item:o}).then(function(e){return e.data&&e.data.authenticated&&l.setState({login:!0}),console.log("res",e.data),1===e.data.status&&l.props.history.push("/dashboard"),e.data}).catch(function(e){throw new Error(e)});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),alert("Some error occurred, please refresh page. "+e.t0.message);case 12:case"end":return e.stop()}},e,this,[[4,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.login&&this.props.history.push("/dashboard"),i.a.createElement("section",{id:"dashboard",className:"dashboard"},i.a.createElement("div",{className:"dashboard--center",style:{textAlign:"center",float:"none"}},i.a.createElement("div",{style:{display:"flex",width:"100%",height:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center"}},i.a.createElement("form",{action:"",style:{width:"500px",backgroundColor:"black",padding:"40px",borderRadius:"5px"}},i.a.createElement("p",{style:{textAlign:"right"}},i.a.createElement(I.a,{to:"/login"}," Back to login ")),i.a.createElement("h1",null,"Sign Up"),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("input",{type:"text",id:"email",placeholder:"Type email",value:this.state.email,onChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("input",{type:"text",id:"username",placeholder:"Type username",value:this.state.username,onChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("input",{type:"password",id:"password",placeholder:"Type password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("button",{style:{width:"80px"},type:"submit",onClick:function(t){return e.handleSignUp(t)}},i.a.createElement("i",{className:"fas fa-user-edit"})," Sign up")))))))}}]),t}(i.a.Component),de=Object(j.a)(Object(l.b)(function(e){return{spot:e.spot}},{})(ce)),ue=function(e){function t(e){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).call(this,e))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return i.a.createElement("section",{id:"dashboard",className:"dashboard"},i.a.createElement(V,null),i.a.createElement("div",{className:"dashboard--center",onClick:this.handleCenterClick},i.a.createElement("h1",null,"Profile")))}}]),t}(i.a.Component),me=Object(j.a)(Object(l.b)(function(e){return{spot:e.spot}},{})(ue)),he=function(e){function t(e){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).call(this,e))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return i.a.createElement("section",{id:"dashboard",className:"dashboard"},i.a.createElement(V,null),i.a.createElement("div",{className:"dashboard--center",onClick:this.handleCenterClick},i.a.createElement("h1",null,"Settings")))}}]),t}(i.a.Component),pe=Object(j.a)(Object(l.b)(function(e){return{spot:e.spot}},{})(he)),fe=function(e){function t(e){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).call(this,e))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return i.a.createElement("section",{id:"dashboard",className:"dashboard"},i.a.createElement(V,null),i.a.createElement("div",{className:"dashboard--center",onClick:this.handleCenterClick},i.a.createElement("h1",null,"Dashboard")))}}]),t}(i.a.Component),ve=Object(j.a)(Object(l.b)(function(e){return{spot:e.spot}},{})(fe)),be=function(){return console.log("Inside videoReadAction"),{type:"Video.Read",payload:{}}},ge=function(e,t){return console.log("Inside videoAddAction",e,t),{type:"Video.Add",payload:{video:e,action:t}}},ye=function(e){return console.log("Inside videoDeleteAction",e),{type:"Video.Delete",payload:{video:e}}},Ee=function(e,t){return console.log("Inside videoUpdateAction",e,t),{type:"Video.Update",payload:{formData:e,action:t}}},we=function(e){return console.log("Inside videoEditAction",e),e.mode="update",{type:"Video.Edit",payload:{video:e}}},je=a(47),Oe=a.n(je),ke=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={model:{}},a.refImage=i.a.createRef(),a.refDisplayImage=i.a.createRef(),a.handleChange=a.handleChange.bind(Object(w.a)(Object(w.a)(a))),a.readUploadingImage=a.readUploadingImage.bind(Object(w.a)(Object(w.a)(a))),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(){var e=this.refImage.current.files,t=this.props,a=t.model,n=t.type;a&&"image"==n&&a.setImagePath(e),a&&"video"==n&&a.setVideoPath(e),this.refImage.current.accept.includes("image")&&this.readUploadingImage()}},{key:"readUploadingImage",value:function(){var e=this,t=this.refImage.current;if(t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){e.refDisplayImage.current.src=t.target.result},a.readAsDataURL(t.files[0])}}},{key:"componentWillReceiveProps",value:function(e,t){var a=e.model;a&&this.setState({model:a})}},{key:"componentDidMount",value:function(){var e=this.props.model;console.log("File",e),e&&this.setState({model:e})}},{key:"render",value:function(){var e=Oe()(),t="*",a=this.props.type;a&&"image"==a&&(t="image/x-png,image/gif,image/jpeg"),a&&"video"==a&&(t="video/mp4,video/x-m4v,video/*");var n=this.state.model;return n.form?i.a.createElement("div",{className:"file-upload"},i.a.createElement("header",null,i.a.createElement("p",{style:{margin:0}},i.a.createElement("i",{className:"fas fa-cloud-upload-alt"})," \xa0 UPLOAD FILES")),i.a.createElement("main",null,i.a.createElement("input",{accept:t,ref:this.refImage,multiple:!0,type:"file",id:e,onChange:this.handleChange}),i.a.createElement("label",{htmlFor:e,className:"upload"},i.a.createElement("i",{className:"fas fa-cloud-upload-alt"}),i.a.createElement("p",null,"Drag your files here")),i.a.createElement("div",{className:"display"},a&&"video"==a?i.a.createElement("video",{width:"100%",controls:!0,autoPlay:!0,key:n.form.video},i.a.createElement("source",{src:n.form.video,type:"video/mp4"})):i.a.createElement("img",{ref:this.refDisplayImage,style:{width:"100%"},src:n.form.image,alt:"Image"}))),i.a.createElement("footer",null,i.a.createElement("span",{className:"progress",style:{width:Number(n.uploadProgress)+"%"}}))):i.a.createElement("div",null,"Loading ...")}}]),t}(i.a.Component);ke.defaultProps={id:"image_upload",accept:"image/x-png,image/gif,image/jpeg",getFiles:function(e){return console.log("You chose these files: ",e)}};var _e=ke,Ne=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={visible:!1},a.setTimeoutId=null,a.types={success:{cls:"alert alert-success",icon:"far fa-check-square"},warning:{cls:"alert alert-warning",icon:"fas fa-exclamation-triangle"},info:{cls:"alert alert-info",icon:"fas fa-info-circle"},danger:{cls:"alert alert-danger",icon:"fas fa-radiation-alt"}},a.onClose=a.onClose.bind(Object(w.a)(Object(w.a)(a))),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"onClose",value:function(){this.setState({visible:!1})}},{key:"componentWillReceiveProps",value:function(e,t){var a=this;this.setState({visible:!0}),clearTimeout(this.setTimeoutId),this.setTimeoutId=setTimeout(function(){a.setState({visible:!1})},3e3)}},{key:"componentDidMount",value:function(){var e=this;clearTimeout(this.setTimeoutId),this.setTimeoutId=setTimeout(function(){e.setState({visible:!1})},3e3)}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.type;return i.a.createElement("div",{className:this.types[a].cls,style:{display:this.state.visible?"flex":"none"}},i.a.createElement("div",{className:"alert-left"},i.a.createElement("i",{className:this.types[a].icon})),i.a.createElement("div",{className:"alert-middle"},t),i.a.createElement("div",{className:"alert-right"},i.a.createElement("span",{onClick:this.onClose},i.a.createElement("i",{className:"far fa-window-close"}))))}}]),t}(i.a.Component),Ae=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={},a.onClose=a.onClose.bind(Object(w.a)(Object(w.a)(a))),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"onClose",value:function(){this.setState({visible:!1})}},{key:"componentWillReceiveProps",value:function(e,t){var a=e.video;this.setState({video:a})}},{key:"componentDidMount",value:function(){var e=this.props.video;this.setState({video:e})}},{key:"render",value:function(){var e=this.state.video;return e?i.a.createElement("article",{className:"video-view",style:{marginTop:"13px"}},i.a.createElement("header",null,i.a.createElement("i",{className:"fas fa-film"}),i.a.createElement("h2",null,e.title),i.a.createElement("i",{className:"fas fa-flag",onClick:this.props.close})),i.a.createElement("main",null,i.a.createElement("div",{className:"left"},i.a.createElement("video",{width:"100%",controls:!0,autoPlay:!0,key:e.video},i.a.createElement("source",{src:e.video,type:"video/mp4"}))),i.a.createElement("div",{className:"footer"},i.a.createElement("div",{className:"footer-image"},i.a.createElement("img",{src:e.image,alt:"image"})),i.a.createElement("div",{className:"footer-detail"},i.a.createElement("div",{className:"footer-row"},i.a.createElement("label",{htmlFor:""},"Genre"),i.a.createElement("p",null,e.genre)),i.a.createElement("div",{className:"footer-row"},i.a.createElement("label",{htmlFor:""},"Description"),i.a.createElement("p",null,e.description)),i.a.createElement("div",{className:"footer-row"},i.a.createElement("i",{className:"far fa-eye"}),i.a.createElement("p",null,e.views)))))):i.a.createElement("div",null,"Loading")}}]),t}(i.a.Component),Ce=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(m.a)(this,e),this._mode="create",this._genreList=[{value:"pop",label:"Pop"},{value:"jazz",label:"Jazz"},{value:"rock",label:"Rock"},{value:"disco",label:"Disco"}],this._uploadProgress=0,this._form={id:"",title:"",description:"",genre:"rock",image_path:"images/ff50cfe0-f591-11e9-b16f-7da8357c7944_14.png",video_path:"videos/ff50cfe0-f591-11e9-b16f-7da8357c7944_songs14.mp4"},this._formResult={affectedRows:0},this._display_fields=["id","title","genre"],this._subscribed=[],this.forceUpdate=function(){return null},this._videoUrl=null,this._imageUrl=null,t&&"object"==typeof t?(this.form=t,this.mode="update"):t&&"function"==typeof t&&(this.forceUpdate=t),console.log("TEST Video constructor",this._form),this.setGenre=this.setGenre.bind(this),this.setUploadProgress=this.setUploadProgress.bind(this),this.setImagePath=this.setImagePath.bind(this),this.setVideoPath=this.setVideoPath.bind(this),this.onSelect=this.onSelect.bind(this)}return Object(h.a)(e,[{key:"subscribe",value:function(e){Array.isArray(e)?this._subscribed=[].concat(Object(Y.a)(this._subscribed),Object(Y.a)(e)):this._subscribed.push(e),console.log("Subscribed",this._subscribed)}},{key:"callSubscribed",value:function(e){console.log("Subscribed callSubscribed",e),this._subscribed.includes(e)&&(console.log("Subscribed callSubscribed if",e),this.forceUpdate())}},{key:"print",value:function(){console.log("Videos constructor",this._mode,this._form)}},{key:"setGenre",value:function(e){this._form.genre=e.value}},{key:"onSelect",value:function(e){this.genre=e}},{key:"setVideoPath",value:function(e){this._form.video_path=e[0]}},{key:"setImagePath",value:function(e){this._form.image_path=e[0]}},{key:"setUploadProgress",value:function(e){this._uploadProgress=e,this.callSubscribed("setUploadProgress"),console.log("TEST Video form setUploadProgress",this.uploadProgress,e),this.uploadProgress>99&&(this.resetForm(),console.log("TEST Video form setUploadProgress",this.form,this.mode))}},{key:"resetForm",value:function(){this.form=(new e).form,this.mode="create"}},{key:"submitForm",value:function(e){var t=this,a=new FormData;Object.keys(this._form).map(function(e){a.append(e,t.form[e]),console.log("Form key",e,a.getAll(e))}),console.log("Before action",a),this.mode,e(a,this.setUploadProgress)}},{key:"__class",get:function(){return"Video"}},{key:"selected",get:function(){var e=this;return this.genreList.find(function(t){return t.value==e.form.genre})}},{key:"genreList",get:function(){return this._genreList}},{key:"data",get:function(){return this._genreList}},{key:"genre",set:function(e){this._form.genre=e.value},get:function(){return this._form.genre}},{key:"id",get:function(){return this._form.id?this._form.id:this._form._id}},{key:"mode",set:function(e){this._mode=e},get:function(){return this._mode}},{key:"form",set:function(e){console.log("TEST Video form",this._form),this._form=e},get:function(){return this._form}},{key:"formResult",set:function(e){this._formResult=e,e&&e.affectedRows>0&&(this.mode="update",this._imageUrl=e.image_path,this._videoUrl=e.video_path,this.callSubscribed("formResult"))}},{key:"formFieldByE",set:function(e){this._form[e.target.id]=e.target.value}},{key:"videoUrl",get:function(){return this._form.result&&this._form.result.video_url?this._form.result.video_url:this._form.video.includes("http")?this._form.video:this._form.videoUrl?this._form.videoUrl:this._form.video?this._form.video:void 0}},{key:"imageUrl",get:function(){return this._form.result&&this._form.result.image_url?this._form.result.image_url:this._form.image.includes("http")?this._form.image:this._form.imageUrl?this._form.imageUrl:this._form.image?this._form.image:void 0}},{key:"videoPath",set:function(e){this._form.video_path=e[0]}},{key:"imagePath",set:function(e){this._form.image_path=e[0]}},{key:"uploadProgress",set:function(e){this._uploadProgress=e},get:function(){return this._uploadProgress}}]),e}(),xe=function(e){function t(e){var a;Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e)))._forceUpdate=a._forceUpdate.bind(Object(w.a)(Object(w.a)(a)));var n=new Ce(a._forceUpdate);return n.subscribe(["setUploadProgress","formResult"]),a.state={video:n,alert:{type:"info",title:"Info"}},a.handleChange=a.handleChange.bind(Object(w.a)(Object(w.a)(a))),a.handleFormSubmit=a.handleFormSubmit.bind(Object(w.a)(Object(w.a)(a))),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"_forceUpdate",value:function(){this.forceUpdate()}},{key:"handleChange",value:function(e){var t=this.state.video;t.formFieldByE=e,this.setState({video:t})}},{key:"handleFormSubmit",value:function(e){e.preventDefault();var t=this.state.video;if(this.props.match.params.id||"update"==t.mode){t.submitForm(this.props.videoUpdateAction);this.setState({alert:{type:"info",title:"Video updated successfully"}})}else{t.submitForm(this.props.videoAddAction);this.setState({alert:{type:"info",title:"Video added successfully"}})}this.forceUpdate()}},{key:"componentWillReceiveProps",value:function(e,t){console.log("componentWillReceiveProps Videos",e);var a=e.videos;if(this.setState({list:a.list}),a&&a.form){var n=this.state.video;"update"===a.form.mode&&(n.form=e.videos.form,n.mode="update"),n.formResult=e.videos.form.result}}},{key:"componentDidMount",value:function(){console.log("componentDidMount Videos",this.props);var e=this.props,t=e.videos.list,a=e.videoReadAction;!t||t.length<1?a():this.setState({list:t})}},{key:"render",value:function(){var e=this,t=this.state.video;return i.a.createElement("section",{id:"dashboard",className:"dashboard"},i.a.createElement(V,null),i.a.createElement(A,null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("h1",null,"Shows"))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-2"},i.a.createElement("form",null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"})),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("input",{type:"text",id:"title",placeholder:"Type title",value:t.form.title,onChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("textarea",{cols:40,rows:5,id:"description",placeholder:"Type description",value:t.form.description,onChange:function(t){return e.handleChange(t)}}," "))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-3"},i.a.createElement("div",{className:"dashboard--container"},i.a.createElement("button",{style:{width:"80px"},type:"submit",onClick:function(t){return e.handleFormSubmit(t)}},i.a.createElement("i",{className:"fas fa-save"})," Save"))))))),i.a.createElement(U,{fields:["id","title","description"],items:this.props.videos.list,itemViewAction:function(t){return e.props.history.push("/videos/"+(t.id?t.id:t._id))},itemEditAction:this.props.videoEditAction,itemDeleteAction:this.props.videoDeleteAction})))}}]),t}(i.a.Component),Se={videoAddAction:ge,videoReadAction:be,videoUpdateAction:Ee,videoDeleteAction:ye,videoEditAction:we},Pe=Object(j.a)(Object(l.b)(function(e){return{videos:e.videos}},Se)(xe)),De=function(e){function t(e){var a;Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e)))._forceUpdate=a._forceUpdate.bind(Object(w.a)(Object(w.a)(a)));var n=new Ce(a._forceUpdate);return n.subscribe(["setUploadProgress","formResult"]),a.state={video:n,alert:{type:"info",title:"Info"}},a.handleChange=a.handleChange.bind(Object(w.a)(Object(w.a)(a))),a.handleFormSubmit=a.handleFormSubmit.bind(Object(w.a)(Object(w.a)(a))),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"_forceUpdate",value:function(){this.forceUpdate()}},{key:"handleChange",value:function(e){var t=this.state.video;if(t.formFieldByE=e,"title"===e.target.id){var a=this.state.list,n=a.filter(function(e){return e.form.title.includes(t.form.title)});console.log(a,n)}this.setState({video:t})}},{key:"handleFormSubmit",value:function(e){e.preventDefault();var t=this.state.video,a={id:this.props.match.params.id,episode:{title:t._form.title,description:t._form.description,genre:t._form.genre},image_path:t._form.image_path,video_path:t._form.video_path},n=new FormData;Object.keys(a).map(function(e){n.append(e,a[e])}),this.props.videoAddAction(n,t.setUploadProgress)}},{key:"componentWillReceiveProps",value:function(e,t){var a=e.match.params.id,n=this.filterById(a,e.videos.list);if(console.log("VideosView componentWillReceiveProps Videos",a,n,e),this.setState({show:n}),e.videos&&e.videos.form&&Object.keys(e.videos.form).length>0){var i=this.state.video;i.form=e.videos.form,i.mode="update",i.formResult=e.videos.form.result}}},{key:"componentDidMount",value:function(){var e=this.props.match.params.id,t=this.filterById(e,this.props.videos.list);console.log("VideosView componentDidMount Show and Videos",t,this.props),this.setState({list:this.props.videos.list,show:t})}},{key:"filterById",value:function(e,t){var a=t.filter(function(t){return t.id==e});return Array.isArray(a)?a[0]:a}},{key:"render",value:function(){var e=this,t=this.state,a=t.video,n=t.show;return n?i.a.createElement("section",{id:"dashboard",className:"dashboard"},i.a.createElement(V,null),i.a.createElement(A,null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("h1",null,"Show View"),i.a.createElement("h3",null,n.form.title),i.a.createElement("h3",null,n.form.description),i.a.createElement("h3",null,"Episodes: ",n.form.episodes.length))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-2"},i.a.createElement("form",null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement(Ne,{type:this.state.alert.type,title:this.state.alert.title}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("input",{type:"text",id:"title",placeholder:"Type title",value:a.form.title,onChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("input",{type:"text",id:"description",placeholder:"Type description",value:a.form.description,onChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement(x,{model:a}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement(_e,{model:a,type:"image"}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement(_e,{model:a,type:"video"}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-3"},i.a.createElement("div",{className:"dashboard--container"},i.a.createElement("button",{style:{width:"80px"},type:"submit",onClick:function(t){return e.handleFormSubmit(t)}},i.a.createElement("i",{className:"fas fa-save"})," Save")))))),i.a.createElement("div",{className:"col-1-of-2"},i.a.createElement(Ae,{video:a}))),i.a.createElement(U,{fields:["id","title"],items:n.form.episodes,itemEditAction:this.props.videoEditAction,itemDeleteAction:this.props.videoDeleteAction}))):i.a.createElement("div",null,"Loading...")}}]),t}(i.a.Component),Ue={videoAddAction:ge,videoReadAction:be,videoUpdateAction:Ee,videoDeleteAction:ye,videoEditAction:we},Re=(Object(j.a)(Object(l.b)(function(e){return{videos:e.videos}},Ue)(De)),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).handleChange=function(e){a.state.show.form[e.target.id]=e.target.value,a.forceUpdate()},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state.show,n=a.props,i=n.createAction,s=n.updateAction;t.submitForm(i,s),a.setState({show:t})},a.state={show:ie.shows},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.readAction,t=this.state.show;t.list=this.props.shows.list,t.form=this.props.shows.form,t.list.length<1?e():this.setState({show:t})}},{key:"componentWillReceiveProps",value:function(e,t){var a=this.state.show;a.list=e.shows.list,a.form=e.shows.form,(!a||a.list.length>0)&&this.setState({show:a})}},{key:"render",value:function(){var e=this,t=this.state.show;return t&&t.form?i.a.createElement("section",{id:"dashboard",className:"dashboard"},i.a.createElement(V,null),i.a.createElement(A,null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("h1",null,"Shows"))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-2"},i.a.createElement("form",null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("input",{type:"text",id:"title",placeholder:"Type title",value:t.form.title,onChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("textarea",{cols:40,rows:5,id:"description",placeholder:"Type description",value:t.form.description,onChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-3"},i.a.createElement("div",{className:"dashboard--container"},i.a.createElement("button",{style:{width:"80px"},type:"submit",onClick:function(t){return e.handleFormSubmit(t)}},i.a.createElement("i",{className:"fas fa-save"})," Save"))))))),i.a.createElement(U,{fields:["id","title","description"],items:t.list,itemViewAction:function(t){return e.props.history.push("/shows/"+(t.id?t.id:t._id))},itemEditAction:this.props.editAction,itemDeleteAction:this.props.deleteAction}))):i.a.createElement("div",null,"Loading...")}}]),t}(i.a.Component)),Ie={readAction:ie.shows.actions.read,deleteAction:ie.shows.actions.delete,editAction:ie.shows.actions.edit,createAction:ie.shows.actions.create,updateAction:ie.shows.actions.update},Te=Object(j.a)(Object(l.b)(function(e){return{shows:e.shows}},Ie)(Re)),Fe=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).handleChange=function(e){a.state.episode.form[e.target.id]=e.target.value,a.forceUpdate()},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state.episode;t.form.show_id=a.props.match.params.id;var n=a.props,i=n.createAction,s=n.updateAction;t.submitForm(i,s),a.setState({episode:t})},a.handleFormClear=function(e){e.preventDefault();var t=a.state.episode;t.resetForm(),a.setState({episode:t})},a.deleteAction=function(e){var t=a.props.match.params.id;a.props.deleteAction(t+"+"+e)},a.viewAction=function(e){e.views=Math.floor(1e3*Math.random()),a.setState({showPlayer:!0,video:e})},a.state={show:{},episode:ie.episodes,showPlayer:!1},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.shows,n=this.state.episode;n._form.show_id=t.params.id,this.setState({episode:n,show:this.filterByShow(a)})}},{key:"componentWillReceiveProps",value:function(e,t){var a=this.state.episode,n=e.shows,i=e.episodes;a.form=i.form,this.setState({episode:a,show:this.filterByShow(n)})}},{key:"filterByShow",value:function(e){var t=this;return!e||Object.keys(e).length<1?(new ee).form:e.list.find(function(e){return e._id===t.props.match.params.id})}},{key:"render",value:function(){var e=this,t=this.state,a=t.episode,n=t.show;if(!n||!n.title)return i.a.createElement("div",null,"Loading...");var s=a.hasId?"Update":"Save";return i.a.createElement("section",{id:"dashboard",className:"dashboard"},i.a.createElement(V,null),i.a.createElement(A,null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("h1",null,"Show View"),i.a.createElement("h3",null,n.title),i.a.createElement("h3",null,n.description),i.a.createElement("h3",null,"Episodes: ",n.episodes.length))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-2"},i.a.createElement("form",null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"})),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("input",{type:"text",id:"title",placeholder:"Type title",value:a.form.title,onChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("input",{type:"text",id:"number",placeholder:"Episode number",value:a.form.number,onChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement("textarea",{cols:40,rows:5,id:"description",placeholder:"Type description",value:a.form.description,onChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement(x,{model:a}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement(_e,{model:a,type:"image"}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-1"},i.a.createElement(_e,{model:a,type:"video"}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1-of-3"},i.a.createElement("div",{className:"dashboard--container"},i.a.createElement("button",{style:{width:"80px"},type:"submit",onClick:function(t){return e.handleFormSubmit(t)}},i.a.createElement("i",{className:"fas fa-save"})," ",s))),i.a.createElement("div",{className:"col-1-of-3"},i.a.createElement("div",{className:"dashboard--container"},i.a.createElement("button",{style:{width:"80px"},type:"submit",onClick:function(t){return e.handleFormClear(t)}},i.a.createElement("i",{className:"fas fa-save"})," Clear")))))),i.a.createElement("div",{className:"col-1-of-2"},this.state.showPlayer?i.a.createElement(Ae,{close:function(){return e.setState({showPlayer:!1})},video:this.state.video}):null)),i.a.createElement(U,{fields:["title","number","description","genre"],items:n.episodes?n.episodes:[],itemViewAction:function(t){return e.viewAction(t)},itemEditAction:this.props.editAction,itemDeleteAction:this.deleteAction})))}}]),t}(i.a.Component),Ve={readShowsAction:ie.shows.actions.read,readAction:ie.episodes.actions.read,deleteAction:ie.episodes.actions.delete,editAction:ie.episodes.actions.edit,createAction:ie.episodes.actions.create,updateAction:ie.episodes.actions.update},Le=Object(j.a)(Object(l.b)(function(e){return{episodes:e.episodes,shows:e.shows}},Ve)(Fe)),ze=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return i.a.createElement(d.a,{basename:"/"},i.a.createElement(b.a,null,i.a.createElement(g.a,{exact:!0,path:"/",component:oe}),i.a.createElement(g.a,{exact:!0,path:"/users",component:M}),i.a.createElement(g.a,{exact:!0,path:"/videos",component:Pe}),i.a.createElement(g.a,{exact:!0,path:"/shows",component:Te}),i.a.createElement(g.a,{exact:!0,path:"/shows/:id",component:Le}),i.a.createElement(g.a,{exact:!0,path:"/login",component:oe}),i.a.createElement(g.a,{exact:!0,path:"/signup",component:de}),i.a.createElement(g.a,{exact:!0,path:"/dashboard",component:J}),i.a.createElement(g.a,{exact:!0,path:"/profile",component:me}),i.a.createElement(g.a,{exact:!0,path:"/settings",component:pe}),i.a.createElement(g.a,{exact:!0,path:"/reports",component:ve}),i.a.createElement(g.a,{component:y})))}}]),t}(n.Component);a(82),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Me=q.a.mark(Be);new ee("show",B+"/api/v1/shows",[],null),new ee("u",B+"/api/v1/users",[],null);function Be(){var e,t;return q.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e=0;case 1:if(!(e<Object.keys(ie).length)){a.next=14;break}return t=ie[Object.keys(ie)[e]],a.next=5,Object(X.c)(t.types.create,t.sagas.create);case 5:return a.next=7,Object(X.c)(t.types.read,t.sagas.read);case 7:return a.next=9,Object(X.c)(t.types.update,t.sagas.update);case 9:return a.next=11,Object(X.c)(t.types.delete,t.sagas.deleted);case 11:e++,a.next=1;break;case 14:case"end":return a.stop()}},Me)}new Q("shows"),new Q("users");for(var We={},Ge=0;Ge<Object.keys(ie).length;Ge++){var He=ie[Object.keys(ie)[Ge]];We[He.name]=He.reducers}var Je=Object(o.c)(Object.assign({},{},We)),Ye=Object(c.a)(),Ke=window.navigator.userAgent.includes("Chrome")&&window.devToolsExtension&&u?Object(o.d)(Object(o.a)(Ye),window.devToolsExtension&&window.devToolsExtension()):Object(o.a)(Ye),qe=Object(o.e)(Je,{},Ke);Ye.run(Be),console.log(qe.getState());for(var $e=0;$e<Object.keys(ie).length;$e++){var Xe=ie[Object.keys(ie)[$e]];qe.dispatch(Xe.actions.read({}))}u&&qe.subscribe(function(){console.log("subscribed store in index",qe.getState())}),r.a.render(i.a.createElement(d.a,null,i.a.createElement(l.a,{store:qe},i.a.createElement(ze,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[49,1,2]]]);
//# sourceMappingURL=main.0762da83.chunk.js.map